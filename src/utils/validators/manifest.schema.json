{
  "definitions": {
    "text": {
      "title": "Text Component Type",
      "description": "Displays text as defined with optional title (over value), warning highlighting, and takeover links",
      "type": "object",
      "required": ["value"],
      "properties": {
        "value": {
            "title": "Text Component Value",
            "description": "Content to display as the value for this text component",
            "type": "string",
            "maxLength": 160
        },
        "link": {
            "title": "Takeover URL",
            "description": "URL to content displayed in takeover when arrow is clicked",
            "example": "https://yourdomain.tld/dashboard_card_link",
            "type": "string",
            "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$"
        },
        "title": {
            "title": "Text Component Title",
            "description": "Text displayed in bold above the value",
            "type": "string"
        },
        "style": {
            "title": "Text Component Warning Style",
            "description": "Sets a warning style title in `orange` with light orange background  for this text component if set to 'warning'",
            "type": "string",
            "pattern": "^(warning)?$"
        }
      }
    },
    "link": {
      "title": "Link Component Type",
      "description": "Similar to Text Component, but includes ability to display information to the right in blue",
      "type": "",
      "required": ["link", "label"],
      "properties": {
        "label": {
          "title": "Link Component Label",
          "description": "Text displayed on left of link component",
          "type": "string"
        },
        "description": {
          "title": "Link Component Description",
          "description": "Text displayed below the label",
          "type": "string"
        },
        "value": {
          "title": "Link Component Value",
          "description": "Content to display as the link text, if empty string disables link",
          "type": "string"
        },
        "style": {
          "title": "Link Component Style",
          "description": "Sets predefined style of link",
          "type": "string",
          "enum": ["warning", "info"]
        },
        "disable_when_empty": {
          "title": "Link Component Disable Setting",
          "description": "When `true` and value !== null but is falsy, disables link. When `false` link always active.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "stat": {
      "title": "Statistic Component",
      "description": "Displays a single statistic, or optional spark line chart, or a delta secondary statstic",
      "type": "object",
      "required": ["primary_value", "primary_label"],
      "properties": {
        "primary_value": {
          "title": "Statistic Component Primary Value",
          "description": "Primary statistic to display, number is not required, can be a string value",
          "type": "string"
        },
        "primary_label": {
          "title": "Statistic Component Primary Label",
          "description": "Label displayed beside statistic, for example a unit of measure",
          "type": "string"
        },
        "secondary_value": {
          "title": "Statistic Component Secondary Value",
          "description": "Secondary statistic to display, number is not required, can be a string value",
          "type": "string"
        },
        "secondary_display": {
          "title": "Statistic Component Secondary Display",
          "description": "How the secondary statistic should be displayed",
          "type": "string",
          "enum": ["sparkline", "delta"]
        },
        "secondary_label": {
          "title": "Statistic Component Secondary Label",
          "description": "Label displayed beside secondary statistic, such as a unit of measure",
          "type": "string"
        },
        "link": {
          "title": "Statistic Component Link",
          "description": "URL displayed in takeover content when arrow is clicked, must implement `https` scheme",
          "type": "string",
          "example": "https://yourdomain.tld/stat/content",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$"
        }
      }
    },
    "action": {
      "title": "Action Component",
      "description": "Clickable link displayed to right side of card and used as a CTA",
      "type": "object",
      "required": ["label", "link"],
      "properties": {
        "label": {
          "title": "Action Component Lable",
          "description": "Text displayed as link",
          "type": "string"
        },
        "link": {
          "title": "Action Component Link",
          "description": "URL to display in takeover when link is clicked. Must implement `https` scheme",
          "type": "string",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$"
          "example": "https://yourdomain.tld/cta"
        },
        "action_type": {
          "title": "Action Component Plus Display",
          "description": "Set to `add` to display a plus symbol after the link text, if not set only label displays",
          "type": "string",
          "enum": ["add"]
        }
      }
    },
    "welcome": {
      "title": "Welcome Component",
      "description": "The Welcome Component displays onboarding info to guide the user through setup process, must be only component on a pane",
      "type": "object",
      "properties": {
        "headline": {
          "title": "Welcome Component Headline",
          "description": "Text displayed in bold above the text",
          "type": "string"
        },
        "text": {
          "title": "Welcome Component Text",
          "description": "Text displayed below the headline",
          "type": "string",
          "pattern": "^[a-zA-Z0-9\s]{1,160}$"
        },
        "action_label": {
          "title": "Welcome Component Action Label",
          "description": "Text displayed in button",
          "type": "string"
        },
        "action_link": {
          "title": "Welcome Component Action Link",
          "description": "URL to takeover content displayed when button is clicked, must implement `https` scheme",
          "type": "string",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
          "example": "https://yourdomain.tld/cta"
        }
      }
    },
    "event": {
      "title": "Event Component",
      "description": "Displays a time-based event",
      "type": "object",
      "required": ["timestamp", "label"],
      "properties": {
        "label": {
          "title": "Event Component Label",
          "description": "Text displayed as link",
          "type": "string"
        },
        "description": {
          "title": "Event Component Description",
          "description": "Text displayed below label, describes event",
          "type": "string"
        },
        "timestamp": {
          "title": "Event Component Timestamp",
          "description": "Unix timestamp in GMT associated with event",
          "type": "string"
        },
        "link": {
          "title": "Event Component Link",
          "description": "URL to takeover content displayed when component is clicked, must implement `https` scheme",
          "type": "string",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
          "example": "https://yourdomain.tld/cta"
        }
      }
    },
    "progress": {
      "title": "Progress Component",
      "description": "Displays the percentage of completion",
      "type": "object",
      "required": ["label", "percentage"],
      "properties": {
        "label": {
          "title": "Progress Component Label",
          "description": "Text displayed as label",
          "type": "string"
        },
        "description": {
          "title": "Progress Component Description",
          "description": "Text displayed below the label to describe type of progress",
          "type": "string"
        },
        "percentage": {
          "title": "Progress Component Percentage",
          "description": "Percentage amount to fill the progress bar",
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "default": 0
        },
        "percentage_description": {
          "title": "Progress Component Percentage Description",
          "description": "Description under progress indicator and beside the percentage value",
          "type": "string"
        },
        "link": {
          "title": "Progress Component Link",
          "description": "URL to takeover content displayed when component is clicked, must implement `https` scheme",
          "type": "string",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
          "example": "https://yourdomain.tld/progress"
        }
      }
    },
    "group": {
      "title": "Group Component",
      "description": "Allows developers to group two or more components together, when group indented, with optinoal label",
      "type": "object",
      "required": ["components"],
      "properties": {
        "label": {
          "title": "Group Component Label",
          "description": "Text displayed as a title for the group",
          "type": "string"
        },
        "components": {
          "title": "Group Component Components",
          "description": "Components included within specified group",
          "type": "array",
          "properties": {
              "anyOf": [
                {"$ref": "#/definitions/text"},
                {"$ref": "#/definitions/link"},
                {"$ref": "#/definitions/stat"},
                {"$ref": "#/definitions/action"},
                {"$ref": "#/definitions/welcome"},
                {"$ref": "#/definitions/event"},
                {"$ref": "#/definitions/progress"},
                {"$ref": "#/definitions/group"}
              ]
          }
        }
      }
    }
  },
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://dev.weebly.com/manifest-schema#",
  "type": "object",
  "properties": {
    "manifest": {
      "$id": "/properties/manifest",
      "type": "string",
      "title": "The Manifest Schema.",
      "description": "The Weebly manifest version this file uses.",
      "default": "1",
      "examples": [
        "1"
      ]
    },
    "version": {
      "$id": "/properties/version",
      "type": "string",
      "title": "App Version",
      "description": "The version for this app, must be SEMVER format and >= the highest version of any sub-components",
      "default": "0.1.0",
      "examples": [
        "3.1.0"
      ]
    },
    "locale": {
      "$id": "/properties/locale",
      "type": "string",
      "title": "Locale schema",
      "description": "Localization information about this app.",
      "pattern": "^[a-zA-Z]{2}\-[a-zA-Z]{2}$",
      "default": "en-us",
      "examples": [
        "en-gb"
      ]
    },
    "client_id": {
      "$id": "/properties/client_id",
      "type": "string",
      "title": "The Client_id Schema.",
      "description": "The OAuth2 `client_id` as provided by the Weebly Developer Admin, note that `client_id` === `app_id`",
      "pattern": "^[0-9]{10}$",
      "default": "",
      "examples": [
        "1919192384"
      ]
    },
    "callback_url": {
      "$id": "/properties/callback_url",
      "type": "string",
      "title": "App OAuth Callback URL",
      "description": "The app callback URL used during OAuth2 Authorization Flow, must implement the `https` scheme",
      "default": "https://example.foo/auth/weebly/callback",
      "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
      "examples": [
        "https://yourdomain.tld/auth/weebly/callback"
      ]
    },
    "manage_app_url": {
      "$id": "/properties/manage_app_url",
      "type": "string",
      "title": "The Manage_app_url Schema.",
      "description": "The URL to manage external settings for this app, must implement the `https` scheme",
      "default": "https://example.foo/auth/weebly/manageCallback",
      "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
      "examples": [
        "https://yourdomain.tld/auth/weebly/manageAppCallback"
      ]
    },
    "scopes": {
      "$id": "/properties/scopes",
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "$id": "/properties/scopes/items",
        "type": "string",
        "title": "App scope",
        "description": "The scopes required by this application if accessing the API",
        "default": "read:site", "write:site",
        "enum": ["read:blog", "write:blog", "read:site", "write:site", "read:store-catalog", "write:store-catalog", "read:store-orders", "write:store-orders", "read:membership", "write:membership"],
        "examples": [
          "read:site"
        ]
      }
    },
    "webhooks": {
      "$id": "/properties/webhooks",
      "type": "object",
      "properties": {
        "callback_url": {
          "$id": "/properties/webhooks/properties/callback_url",
          "type": "string",
          "title": "Webhook Callback URL",
          "description": "Required, if using Webhooks, used in Authorization Flow to subscribe and destination to receive events and data, must implement the `https` scheme.",
          "default": "",
          "pattern": "^(https?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$",
          "examples": [
            "https://yourdomain.tld/auth/weebly/webhookCallback"
          ]
        },
        "events": {
          "$id": "/properties/webhooks/properties/events",
          "type": "array",
          "minItems": 1,
          "uniqueItems": true,
          "items": {
            "$id": "/properties/webhooks/properties/events/items",
            "type": "string",
            "title": "Webhook Events",
            "description": "List of valid webhook events from which your app may subscribe",
            "enum": ["user.update", "site.update", "site.publish", "site.copy", "site.delete", "site.unpublish", "store.info.update", "store.category.create", "store.category.delete", "store.category.update", "store.product.create", "store.product.update", "store.product.delete", "store.cart.create", "store.cart.update", "store.order.create", "store.order.update", "store.order.pay", "store.order.refund", "store.order.ship", "store.order.return", "store.order.cancel", "store.coupon.create", "store.coupon.delete", "store.coupon.update", "store.coupon.use", "membership.register", "membership.update", "membership.destroy", "app.uninstall", "element.instance.copy", "element.instance.delete", "form.submit", "dashboard.card.update"],
            "default": "",
            "examples": [
              "user.update"
            ]
          }
        }
      },
      "required": [
        "callback_url",
        "events"
      ]
    },
    "snippet": {
      "$id": "/properties/snippet",
      "type": "string",
      "title": "The Snippet Schema.",
      "description": "Relative path to the HTML for the given snippet",
      "default": "",
      "examples": [
        "relative/path/to/snippet.html"
      ]
    },
    "oauth_final_destination": {
      "$id": "/properties/oauth_final_destination",
      "type": "string",
      "title": "The Oauth_final_destination Schema.",
      "description": "Instructs Weebly where to redirect the user after they have authorized an app for use on their site.",
      "default": "editor",
      "enum": ["editor", "manage", "publish", "dashboard_card-DASHBOARD_CARD_NAME"],
      "examples": [
        "editor"
      ]
    },
    "dashboard_cards": {
      "$id": "/properties/dashboard_cards",
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
          "$id": "/properties/dashboard_cards/items",
          "type": ["array", "object"],
          "minitems": 1,
          "properties": {
            "name": {
              "$id": "/properties/dashboard_cards/properties/name",
              "type": "string",
              "title": "Internal Dashboard Card Name",
              "description": "Unique, internal reference name for the given element.",
              "default": "",
              "examples": [
                "nameOfDashboardCard"
              ]
            },
            "version": {
              "$id": "/properties/dashboard_cards/properties/version",
              "type": "string",
              "title": "Dashboard Card Version",
              "description": "This is the version of the given dashboard card, must be in SEMVER format",
              "default": "0.1.0",
              "examples": [
                "2.3.1"
              ]
            },
            "label": {
              "$id": "/properties/dashboard_cards/properties/label",
              "type": "string",
              "title": "Dashboard Card Label",
              "description": "The publicly displayed label of the given dashboard card",
              "default": "",
              "examples": [
                "label for dashboard card"
              ]
            },
            "icon": {
              "$id": "/properties/dashboard_cards/properties/icon",
              "type": "string",
              "title": "Dashboard Card Icon",
              "description": "The icon for the given dashboard card, must be SVG file",
              "default": "",
              "examples": [
                "relative/path/to/icon.svg"
              ]
            },
            "link": {
              "$id": "/properties/dashboard_cards/properties/link",
              "type": "string",
              "title": "The Link Schema.",
              "description": "The link for the given dashboard card information, must implmenet the `https` scheme",
              "default": "",
              "examples": [
                "url"
              ]
            },
            "default": {
              "$id": "/properties/dashboard_cards/properties/default",
              "type": "array",
              "items": {
                "$id": "asianbear",
                "title": "Empty Object",
                "type": ["array", "object"],
                "description": "If an array it is a pane of components, if objects the order-specific components",
                "items": { "$ref": "#" }
              }
            }
          },
          "required": [
            "name",
            "version"
          ]
      }
    },
    "elements": { "$ref": "#/definitions/elements" },
  "required": [
    "manifest",
    "version"
  ]
}
